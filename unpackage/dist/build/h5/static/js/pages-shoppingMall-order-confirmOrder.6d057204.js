(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shoppingMall-order-confirmOrder"],{"01ff":function(e,t,a){"use strict";a.r(t);var r=a("8c03"),i=a("406c");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("b0c7");var n,s=a("f0c5"),c=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"a6c9563e",null,!1,r["a"],n);t["default"]=c.exports},"03ee":function(e,t,a){"use strict";var r=a("ff86"),i=a.n(r);i.a},1776:function(e,t,a){var r=a("41ac");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("4f06").default;i("2541c331",r,!0,{sourceMap:!1,shadowMode:!1})},2804:function(e,t,a){"use strict";a.r(t);var r=a("4ef5"),i=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},"406c":function(e,t,a){"use strict";a.r(t);var r=a("71dc"),i=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},"41ac":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,"[data-v-a6c9563e] .uni-popup__wrapper-box{width:100%}.setWidth[data-v-a6c9563e] .headView{width:118px}.radio-group[data-v-a6c9563e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.radio-group .radio[data-v-a6c9563e]{padding:%?10?% %?30?%;border-radius:%?6?%;border:1px solid #ccc;margin-right:6px}.radio-group .radio.checked[data-v-a6c9563e]{background-color:#adb838;color:#fff;border:1px solid #adb838}",""]),e.exports=t},"4ef5":function(e,t,a){"use strict";var r=a("ee27");a("4de4"),a("4160"),a("c975"),a("a15b"),a("a9e3"),a("b680"),a("d3b7"),a("acd8"),a("e25e"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=r(a("c964")),o=r(a("fc11")),n=a("e4e4"),s=a("4ddd"),c=r(a("9d14")),d=r(a("b30c")),l={name:"confirmOrder",components:{adCell:d.default},data:function(){return(0,o.default)({mainStyle:getApp().globalData.mainStyle,mainColor:getApp().globalData.mainColor,loading:!0,currentItem:[],UserRemarks:"",UserTime:"",UserDiscount:"",UserDiscountName:"请选择方案",currentArea:{},radioModes:2,prodList:[],showAreaList:!1,addEditArea:!1,selectTime:!1,discountProgram:!1,resultArea:"",areaList:[],DeliveryAreaList:[],takeOver:[],freight:0,total:0,totalCurrent:0,location:{},activeKey:0,sidebarList:[],rightTimeList:[],radioTime:"",radioPayType:"1",CardInfo:{},phone_user:"",name_user:"",orderId:"",cardSids:[],ProdTotal:0,radioDiscount:"",DiscountList:[],allTimeSlot:[],RecordTime:{},areaInfo:{},currentDeliveryType:"",testData:{},allData:{},totalCurrentScore:0,currentIndex:0},"location",JSON.parse(sessionStorage.getItem("location")))},created:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.state.currentCard&&0!==e.$store.state.currentCard.length||(e.$Router.back(2),e.$Router.back(100)),t.next=3,e.getWxConfig();case 3:if(a=e.$store.state.currentCard||[],a.forEach((function(t){if(t.SID&&e.cardSids.push(t.SID),t.PartsNo instanceof Array){var a=[],r=JSON.parse(JSON.stringify(t.PartsNo));r.forEach((function(e){a.push(e.ProdNo)})),t.PartsNo=a.join(",")}})),e.currentItem=JSON.stringify(a),e.cardSids=e.cardSids?e.cardSids.join(","):"",!e.$Route.query.isIntegral){t.next=12;break}return t.next=10,e.getInfoIntegral();case 10:t.next=14;break;case 12:return t.next=14,e.getInfo();case 14:case"end":return t.stop()}}),t)})))()},mounted:function(){if("takein"===this.$store.state.orderType){this.radioModes=1;var e=JSON.parse(localStorage.getItem("currentStoreInfo"));this.currentArea=e.data}else this.currentArea=JSON.parse(sessionStorage.getItem("takeOutAddress"))},methods:{getInfo:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,uni.showLoading(),t.prev=2,e.location.longitude){t.next=6;break}throw uni.showToast({title:"地址获取失败",duration:2e3}),"地址获取失败";case 6:a=JSON.parse(e.currentItem),e.currentDeliveryType=a[0].DeliveryType,r={Action:"SettlePay",ProdList:e.currentItem,DefLongitude:e.location.longitude,DefLatitude:e.location.latitude,DeliveryType:e.currentDeliveryType},a[0].hasOwnProperty("PromotionItemSID")&&(r.PromotionItemSID=a[0].PromotionItemSID),Promise.all([e.saveArea(!0),(0,n.vipCard)(r,"UProdOpera")]).then((function(t){e.takeOver=t[0];var a=t[1].Data;console.log(a,77765655),e.allData=a,e.prodList=a.ProdList,e.currentItem=JSON.parse(JSON.stringify(e.prodList)),e.currentDeliveryType=a.ProdList[0].DeliveryType,1===e.radioModes?e.areaList=a.ShopInfoList:e.areaList=t[0],e.freight=a.Freight,e.total=a.SumTotal,e.ProdTotal=a.ProdTotal,e.totalCurrent=parseFloat(Number(a.SumTotal).toFixed(2)),e.CardInfo=a.hasOwnProperty("CardInfo")?a.CardInfo:{},"{}"!==JSON.stringify(e.CardInfo)?Number(a.CardInfo.Balance)<Number(a.SumTotal)&&(e.radioPayType="2"):e.radioPayType="2",e.DeliveryAreaList=a.ShopInfoList,e.loading=!1,uni.hideLoading()})).catch((function(t){e.loading=!1,uni.hideLoading()})),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),e.loading=!1,uni.hideLoading();case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},getInfoIntegral:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,uni.showLoading(),t.next=4,(0,n.vipCard)({Action:"SettlePay",ProdList:e.currentItem},"UIntegralOpera");case 4:a=t.sent,r=a.Data,e.prodList=r.ProdList,e.allData=r,e.CardInfo=r.CardInfo,e.currentItem=JSON.parse(JSON.stringify(e.prodList)),e.totalCurrent=parseFloat(Number(r.SalePriceTotal).toFixed(2)),r.ScoreTotal&&(e.totalCurrentScore=parseFloat(Number(r.ScoreTotal).toFixed(2))||0),e.loading=!1,uni.hideLoading(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),e.loading=!1,uni.hideLoading();case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))()},orderArea:function(){},getWxConfig:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,n.vipCard)({Action:"GetJSSDK",Url:window.location.href},"UProdOpera");case 3:a=t.sent,r=a.Data,c.default.config({debug:!0,appId:r.SDK.appId,timestamp:r.SDK.timestamp,nonceStr:r.SDK.noncestr,signature:r.SDK.signature,jsApiList:["getLocation","openAddress"]}),c.default.ready((function(t){var a=e;c.default.getLocation({type:"wgs84",success:function(e){a.location={longitude:e.longitude,latitude:e.latitude},a.$store.commit("SET_CURRENT_LOCATION",a.location),sessionStorage.setItem("location",JSON.stringify(a.location))},cancel:function(e){alert("cancel",e)}}),c.default.error((function(e){this.$toast.fail("获取当前位置失败");alert("调用微信接口获取当前位置失败",e)}))})),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getAddress:function(){var e=this;c.default.openAddress({success:function(t){alert(JSON.stringify(t)),e.name_user=t.userName,e.phone_user=t.telNumber}})},changeMode:function(e){this.radioModes=e,this.areaList=1==e?this.DeliveryAreaList:this.takeOver,this.currentArea=this.areaList[0],1===e?this.totalCurrent=this.total-this.freight:(this.totalCurrent=this.total,this.takeOver.filter((function(e){return"1"===e.Defaults})).length>0&&(this.currentArea=this.takeOver.filter((function(e){return"1"===e.Defaults}))[0]),this.resultArea=this.currentArea.SID),this.totalCurrent=parseFloat(Number(this.totalCurrent).toFixed(2))},radioChange:function(){this.showAreaList=!0,this.$refs.showAreaList.open()},radioPayChange:function(e){this.CardInfo&&Number(this.CardInfo.Balance)<this.totalCurrent||(this.radioPayType=e.detail.value)},changeGroup:function(e){this.resultArea=e.detail.value},changeArea:function(e,t){var a=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var i,o,s,c,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e,t,"选择地址这一块"),a.showAreaList=!0,a.$refs.showAreaList.open(),1===a.radioModes?i="IsPickShop":a.currentDeliveryType.indexOf("2")>-1?i="CalcFreight":a.currentDeliveryType.indexOf("3")>-1&&(i="CalcLogistics"),r.prev=4,a.loading=!0,uni.showLoading(),o={Action:i,Latitude:e.Latitude||"",Longitude:e.Longitude||"",ShopSID:e.SID,PayType:a.radioPayType,ProdList:JSON.stringify(a.currentItem)},r.next=10,(0,n.vipCard)(o,"UProdOpera");case 10:s=r.sent,c=s.Data,1===a.radioModes?(a.currentArea=e,d=a.currentArea,a.$store.commit("SET_CURRENT_STORE",d)):(a.currentArea=e,a.freight=c.Freight,sessionStorage.setItem("takeOutAddress",JSON.stringify(a.currentArea))),a.showAreaList=!1,a.$refs.showAreaList.close(),r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](4),console.log(r.t0);case 20:case"end":return r.stop()}}),r,null,[[4,17]])})))()},clickEdit:function(e){this.areaInfo=e,this.$refs.addEditArea.open(),this.addEditArea=!0},clickGo:function(){this.$refs.addEditArea.close(),this.addEditArea=!1},clickLeft:function(){this.$Route.query.flag?this.$Router.push({path:"/pages/shoppingMall/menu_naixue/menu/menu",query:{flag:"Deflocation"}}):this.$Router.push(this.$store.state.historyUrl)},clickDataTime:function(){console.log("吊起时间"),this.selectTime=!0,this.$refs.selectTime.open()},clickUserDiscount:function(){this.discountProgram=!0,this.$refs.discountProgram.open()},clickTime:function(){},saveAreaSet:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.addEditArea.close(),e.addEditArea=!1,e.loading=!0,uni.showLoading(),t.next=6,e.saveArea(!1);case 6:a=t.sent,e.areaList=a,e.takeOver=a,e.loading=!1,uni.hideLoading();case 11:case"end":return t.stop()}}),t)})))()},saveArea:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.currentDeliveryType.indexOf("2")>-1?r=1:t.currentDeliveryType.indexOf("3")>-1&&(r=2),a.next=4,(0,n.vipCard)({Action:"GetAddressList",Type:r},"UMemberOpera");case 4:return i=a.sent,o=i.Data,e&&uni.showLoading(),a.abrupt("return",o.AddressList);case 10:return a.prev=10,a.t0=a["catch"](0),a.abrupt("return",[]);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},PayTypeClick:function(e){this.CardInfo&&Number(this.CardInfo.Balance)<this.totalCurrent||(this.radioPayType=e)},changeSider:function(e){this.currentIndex=e,this.activeKey=e,this.RecordTime.index===e?this.radioTime=this.RecordTime.radioTime:this.radioTime="",this.rightTimeList=0!==e?this.allTimeSlot:this.todayTimeSlot},rightTimeClick:function(e){this.RecordTime={radioTime:e,index:this.activeKey},this.radioTime=e,this.selectTime=!1,this.$refs.selectTime.close(),this.UserTime=this.sidebarList[this.activeKey]+" "+this.radioTime},radioTimeFun:function(e){this.radioTime=e.detail.value},setDiscountClick:function(e){this.radioDiscount=e.detail.value},DiscountClick:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var r,i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.PrefNo,"undefined"===e&&(r=""),t.discountProgram=!1,t.$refs.discountProgram.close(),a.prev=4,i={Action:"SelectDisc",PrefNo:r,ProdList:t.currentItem,PayType:t.radioPayType,Latitude:t.currentArea.Latitude,Longitude:t.currentArea.Longitude},t.loading=!0,uni.showLoading(),a.next=10,(0,n.vipCard)(i,"UProdOpera");case 10:o=a.sent,s=o.Data,t.UserDiscountName="undefined"===e?"优惠券方案":e.PrefName,t.UserDiscount="undefined"===e?"暂不使用":"¥"+e.DiscPrice,t.radioDiscount="undefined"===e?e:e.PrefNo,t.totalCurrent=parseFloat(Number(s.Total?s.Total:s.SumTotal).toFixed(2)),t.loading=!1,uni.hideLoading(),a.next=24;break;case 20:a.prev=20,a.t0=a["catch"](4),t.loading=!1,uni.hideLoading();case 24:case"end":return a.stop()}}),a,null,[[4,20]])})))()},areaSet:function(){this.areaInfo={},this.addEditArea=!0,this.$refs.addEditArea.open()},submitMoney:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,r,i,o,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("{}"!==JSON.stringify(e.currentArea)||e.$Route.query.isIntegral){t.next=3;break}return e.$toast("请选择地址"),t.abrupt("return");case 3:if(1!==e.radioModes){t.next=15;break}if(e.phone_user&&""!==e.phone_user){t.next=9;break}return e.$toast("请填写手机号码"),t.abrupt("return");case 9:if((0,s.checkMobile)(e.phone_user)){t.next=12;break}return e.$toast("手机号格式错误"),t.abrupt("return");case 12:if(e.name_user&&""!==e.name_user){t.next=15;break}return e.$toast("请填写收件名字"),t.abrupt("return");case 15:if("undefined"===e.radioDiscount&&(e.radioDiscount=""),a=e.radioModes,2===e.radioModes?e.currentDeliveryType.indexOf("2")>-1?a=2:e.currentDeliveryType.indexOf("3")>-1&&(a=3):a=1,"string"!==typeof e.currentItem&&(e.currentItem=JSON.stringify(e.currentItem)),console.log(e.currentArea,"选择后的地址信息"),r={Action:"OrderPay",DeliveryType:a,UserName:2===e.radioModes?e.currentArea.Name:e.name_user,Mobile:1===e.radioModes?e.phone_user:e.currentArea.Mobile,Address:2===e.radioModes?e.currentArea.Address+"  "+e.currentArea.House:"",ProdList:e.currentItem,Latitude:e.currentArea.Latitude||"",Longitude:e.currentArea.Longitude||"",Province:e.currentArea.Province||"",AddressSID:2===e.radioModes?e.resultArea.SID:"",ShopSID:1===e.radioModes?e.resultArea:"",UserRemarks:e.UserRemarks,PayType:e.radioPayType,PickDate:e.sidebarList[e.RecordTime.index],PickTime:e.RecordTime.radioTime,CartSID:e.cardSids,PrefNo:e.radioDiscount},JSON.parse(e.currentItem)[0].hasOwnProperty("PromotionItemSID")&&(r.PromotionItemSID=JSON.parse(e.currentItem)[0].PromotionItemSID),!e.$Route.query.isIntegral){t.next=32;break}if(i=JSON.parse(e.currentItem),r=i[0],r.Action="OrderPay",r.PayType=e.radioPayType,r.UserRemarks=e.UserRemarks,r.DeliveryType=1,e.CardInfo){t.next=32;break}return e.$toast.fail("未绑定微卡"),t.abrupt("return");case 32:return o=e.$Route.query.isIntegral?"UIntOrderOpera":"UOrderOpera",e.loading=!0,uni.showLoading(),t.prev=35,t.next=38,(0,n.vipCard)(r,o);case 38:if(c=t.sent,d=c.Data,e.loading=!1,uni.hideLoading(),e.$store.commit("SET_CURRENT_CARD",[]),uni.removeStorageSync("alreadyPaid"),"1"===e.radioPayType)e.$Router.push({path:"/pages/shoppingMall/order/confirmCard",query:{Balance:e.CardInfo.Balance,Score:e.CardInfo.Score,PayScore:d.hasOwnProperty("PayScore")?d.PayScore:"",total:d.SumTotal,PayNo:d.PayNo,IsPass:d.IsPass}});else{e.testData=d;try{(0,s.weChatPayment)(e,d,!1)}catch(l){that.$toast.fail("微信调起失败"),e.loading=!1,uni.hideLoading()}}t.next=51;break;case 47:t.prev=47,t.t0=t["catch"](35),e.loading=!1,uni.hideLoading();case 51:case"end":return t.stop()}}),t,null,[[35,47]])})))()}},filters:{setSex2:function(e){return 0==e?"先生":1==e?"女士":void 0}}};t.default=l},"71dc":function(e,t,a){"use strict";var r=a("ee27");a("c975"),a("a9e3"),a("ac1f"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=r(a("c964")),o=a("e4e4"),n=r(a("1703")),s=a("4ddd"),c=r(a("b30c")),d=r(a("9d14")),l={name:"index",components:{adCell:c.default},props:{areaInfo:[Object],currentDeliveryType:[String,Number]},data:function(){return{specificArea:!1,logisticsArea:!1,isAdd:!1,form:{Sex:0},location:{},areaList:n.default,disabledLoad:!1,specificAreaHead:!1,cityPickerValueDefault:[0,0,1]}},created:function(){if(this.getWxConfig(),this.DeliveryType=this.currentDeliveryType.indexOf("2")>-1?2:3,"{}"!==JSON.stringify(this.areaInfo)){this.form=JSON.parse(JSON.stringify(this.areaInfo)),this.form.Defaults="1"===this.form.Defaults;var e=this.form.Sex.replace(/\s*/g,"");this.form.Sex="先生"===e?"0":"1",this.location={latitude:this.areaInfo.Latitude,longitude:this.areaInfo.Longitude}}else this.location=this.$store.state.currentLocation;var t=this;window.addEventListener("message",(function(e){var a=e.data;a&&"locationPicker"==a.module&&(t.$refs.specificArea&&t.$refs.specificArea.close(),t.$nextTick((function(){t.specificArea=!1,t.specificAreaHead=!1,t.$set(t.form,"Address",a.poiname),t.$set(t.form,"Latitude",a.latlng.lat),t.$set(t.form,"Longitude",a.latlng.lng)})))}),!1)},methods:{getWxConfig:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.vipCard)({Action:"GetJSSDK",Url:window.location.href},"UProdOpera");case 3:a=t.sent,r=a.Data,d.default.config({debug:!0,appId:r.SDK.appId,timestamp:r.SDK.timestamp,nonceStr:r.SDK.noncestr,signature:r.SDK.signature,jsApiList:["getLocation","openAddress"]}),d.default.ready((function(t){var a=e;d.default.getLocation({type:"wgs84",success:function(e){a.location.latitude=e.latitude,a.location.longitude=e.longitude,this.$store.commit("SET_CURRENT_LOCATION",this.location)},cancel:function(e){alert("cancel",e)}}),d.default.error((function(e){this.$toast.fail("获取当前位置失败");alert("调用微信接口获取当前位置失败",e)}))})),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getWxAddress:function(){var e=this;d.default.openAddress({success:function(t){e.form.Name=t.userName,e.form.Mobile=t.telNumber}})},clickGo:function(){this.specificAreaHead?(this.specificArea=!1,this.specificAreaHead=!1,this.$refs.specificArea.close()):this.$emit("clickGo")},radioChangeSex:function(e){this.form.Sex=e.detail.value},switchChange:function(e){this.form.Defaults=e.detail.value},clickGoAddress:function(){},tenxButton:function(){2===Number(this.DeliveryType)?(this.specificArea=!0,this.$refs.specificArea.open(),this.specificAreaHead=!0):(this.logisticsArea=!0,this.$refs.logisticsArea.open())},confirmArea:function(e){this.logisticsArea=!1,this.$refs.logisticsArea.close(),this.form.Address=e.label,this.form.Type=2,this.form.Province=e.labelArr[0],this.form.City=e.labelArr[1],this.form.District=e.labelArr[2]},saveArea:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.Address){t.next=3;break}return e.$toast("选择地址"),t.abrupt("return");case 3:if(e.form.House){t.next=6;break}return e.$toast("填写门牌号"),t.abrupt("return");case 6:if(e.form.Name){t.next=9;break}return e.$toast("填写联系人"),t.abrupt("return");case 9:if(e.form.Mobile){t.next=14;break}return e.$toast("填写手机号"),t.abrupt("return");case 14:if((0,s.checkMobile)(e.form.Mobile)){t.next=17;break}return e.$toast("手机号格式错误"),t.abrupt("return");case 17:return e.disabledLoad=!0,e.form.Type=e.form.Type?e.form.Type:1,t.prev=19,a={Action:"SetAddress"},Object.assign(a,e.form),a.Defaults=!0===a.Defaults?1:0,t.next=25,(0,o.vipCard)(a,"UMemberOpera");case 25:r=t.sent,r.Data,e.$emit("saveArea"),e.disabledLoad=!1,t.next=34;break;case 31:t.prev=31,t.t0=t["catch"](19),e.disabledLoad=!1;case 34:case"end":return t.stop()}}),t,null,[[19,31]])})))()},bindAddress:function(e){var t=this;t.$refs.specificArea&&t.$refs.specificArea.close(),t.$nextTick((function(){t.specificArea=!1,t.specificAreaHead=!1,t.$set(t.form,"Address",e.address),t.$set(t.form,"Latitude",e.location.lat),t.$set(t.form,"Longitude",e.location.lng)}))}}};t.default=l},"8c03":function(e,t,a){"use strict";var r={uniNavBar:a("cefd").default,uniPopup:a("6900").default,simpleAddress:a("5aad").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("uni-nav-bar",{attrs:{fixed:!0,"left-icon":"back",title:e.specificAreaHead?"选择收货地址":"收货地址","status-bar":!0,shadow:!1},on:{clickLeft:function(t){arguments[0]=t=e.$handleEvent(t),e.clickGo.apply(void 0,arguments)}}}),a("div",[a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"联系人",showArrow:"false"}},[a("v-uni-input",{attrs:{type:"text",placeholder:"请填写收货人的姓名"},model:{value:e.form.Name,callback:function(t){e.$set(e.form,"Name",t)},expression:"form.Name"}}),a("v-uni-text",{staticClass:"iconfont icon-tongxunlu",staticStyle:{position:"absolute",right:"30px",top:"15px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getWxAddress.apply(void 0,arguments)}}})],1)],1),a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"性别",showArrow:"false"}},[a("v-uni-view",{staticClass:"radio-group"},[a("v-uni-view",{staticClass:"radio",class:{checked:!e.form.Sex},staticStyle:{"margin-right":"10rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.form.Sex=0}}},[e._v("先生")]),a("v-uni-view",{staticClass:"radio",class:{checked:e.form.Sex},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.form.Sex=1}}},[e._v("女士")])],1)],1)],1),a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"手机号",showArrow:"false"}},[a("v-uni-input",{attrs:{type:"text",placeholder:"请填写收货人手机号码"},model:{value:e.form.Mobile,callback:function(t){e.$set(e.form,"Mobile",t)},expression:"form.Mobile"}})],1)],1),a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"收货地址",showArrow:"false"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tenxButton.apply(void 0,arguments)}}},[a("span",[e._v(e._s(e.form.Address?e.form.Address:"点击选择"))])])],1),a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"门牌号",showArrow:"false"}},[a("v-uni-input",{attrs:{type:"text",placeholder:"详细地址，例：15号楼5层301室"},model:{value:e.form.House,callback:function(t){e.$set(e.form,"House",t)},expression:"form.House"}})],1)],1),a("div",{staticClass:"setADcell setWidth"},[a("adCell",{attrs:{text:"设置为默认地址",showArrow:"false"}},[a("v-uni-switch",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.switchChange.apply(void 0,arguments)}}})],1)],1)]),a("div",{staticStyle:{"margin-top":"50px",padding:"0 20px"}},[a("v-uni-button",{attrs:{type:"main",size:"large",disabled:e.disabledLoad},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveArea.apply(void 0,arguments)}}},[e._v("保存地址")])],1),a("uni-popup",{ref:"specificArea",staticClass:"confirm-area-popup",staticStyle:{"margin-top":"50px"}},[a("iframe",{staticStyle:{"margin-top":"50px"},attrs:{id:"mapPage",width:"100%",height:"100%",frameborder:"0",src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&policy=1&coord="+e.location.latitude+","+e.location.longitude+"&key=IB5BZ-HF53W-5KLRH-R3VUL-35KO7-Y2BUT&referer=365商城管理"}})]),a("simple-address",{ref:"logisticsArea",attrs:{pickerValueDefault:e.cityPickerValueDefault,cancelColor:"#999",themeColor:"#007AFF"},on:{onConfirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirmArea.apply(void 0,arguments)}}})],1)},o=[];a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return r}))},"91a7":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".indexTop[data-v-5f6310bd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:10px 0 5px 0;background:#fff}.changeMode[data-v-5f6310bd]{width:140px;height:50px;display:-webkit-box;display:-webkit-flex;display:flex;background:#eee;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:10px;font-size:14px;position:relative;overflow:hidden}.changeModeImg[data-v-5f6310bd]{width:25px!important;height:25px!important}.changeModeLeft[data-v-5f6310bd]{margin-right:15px}.changeModeRight[data-v-5f6310bd]{margin-left:15px}.changeTopIcon[data-v-5f6310bd]{right:-2px;position:absolute;bottom:-4px;font-size:28px}.setADcell[data-v-5f6310bd]{margin:5px 0}.confirm-order-style[data-v-5f6310bd]{margin-bottom:80px\n  /*margin-left: 10px !important;*/}.confirm-order-style .uni-popup[data-v-5f6310bd]{z-index:999}.confirm-order-style .setADcell[data-v-5f6310bd] .detailView1{-webkit-box-flex:0;-webkit-flex:none;flex:none}.confirm-order-style .setADcell[data-v-5f6310bd] .headView{-webkit-box-flex:0;-webkit-flex:none;flex:none;width:90px}.confirm-order-style .radio-group-play[data-v-5f6310bd]{background-color:#fff;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:5px %?24?%;margin-top:5px}.confirm-order-style .radio-group-play .payStyle[data-v-5f6310bd]{background:#fff;font-size:14px;color:#5a5b5c;padding:13px 0}.confirm-order-style .radio-group-play .radio-group-item[data-v-5f6310bd]{padding:6px 0;display:-webkit-box;display:-webkit-flex;display:flex}.confirm-order-style .radio-group-play .custom-title[data-v-5f6310bd]{vertical-align:middle}.confirm-order-style .total-style[data-v-5f6310bd]{background:#fff;text-align:right;line-height:40px;font-size:16px;padding-right:10px;border-bottom:%?1?% solid #ebedf0}.confirm-order-style .total-style__color[data-v-5f6310bd]{color:red}.confirm-order-style .order-area[data-v-5f6310bd]{background:#fff;padding:14px 6px;display:-webkit-box;display:-webkit-flex;display:flex}.confirm-order-style .order-area-icon[data-v-5f6310bd]{margin:auto}.confirm-order-style .order-area-icon img[data-v-5f6310bd],\n.confirm-order-style .order-area-icon uni-image[data-v-5f6310bd]{margin:0 10px;width:40px;height:40px}.confirm-order-style .order-area-phone[data-v-5f6310bd]{font-size:14px;color:#909090;margin-left:8px}.confirm-order-style .order-area-location[data-v-5f6310bd]{font-size:12px;margin-top:3px}.confirm-order-style .good_card_box[data-v-5f6310bd]{background:#fff;margin:5px 0 5px;padding:10px}.confirm-order-style .good_card_box .boxShadow[data-v-5f6310bd]{box-shadow:none}.confirm-order-style .good_card_box .rightBox[data-v-5f6310bd]{margin:0 10px}.confirm-order-style .confirm-order-popup[data-v-5f6310bd]{background-color:#fff;max-height:50%}.confirm-order-style .confirm-order-popup .top[data-v-5f6310bd]{padding:10px 20px 10px;text-align:center;border-bottom:1px solid #eee;position:relative}.confirm-order-style .confirm-order-popup .cancel[data-v-5f6310bd]{font-size:12px;position:absolute;left:20px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);color:#777}.confirm-order-style .bottom-area[data-v-5f6310bd]{max-height:60vh;overflow:scroll}.confirm-order-style .bottom-area__box[data-v-5f6310bd]{display:-webkit-box;display:-webkit-flex;display:flex;padding:8px 12px;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.confirm-order-style .bottom-area__info[data-v-5f6310bd]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:14px}.confirm-order-style .bottom-area__icon[data-v-5f6310bd]{width:30px;text-align:center;margin:auto}.confirm-order-style .bottom-area__phone[data-v-5f6310bd]{color:#969799;font-size:12px;margin-top:5px}.confirm-order-style .bottom-area__add[data-v-5f6310bd]{text-align:center;padding:10px;border-top:1px solid #eee}.confirm-order-style .bottom-area .checkbox-my[data-v-5f6310bd]{margin-right:10px}.confirm-order-style .confirm-area-popup[data-v-5f6310bd]{height:100%}.confirm-order-style .confirm-area-popup[data-v-5f6310bd] .uni-popup__wrapper-box{height:100%;background:#fff}.confirm-order-style .confirm-selectTime-popup[data-v-5f6310bd]{height:50vh}.confirm-order-style .confirm-selectTime-popup .leftNavsidebar[data-v-5f6310bd]{width:130px;display:fixed;position:fixed;top:0;overflow-y:scroll;background:#f8f8f8;height:100vh}.confirm-order-style .confirm-selectTime-popup .leftNavsidebar .activeCanteen[data-v-5f6310bd]{background:#fff}.confirm-order-style .confirm-selectTime-popup .leftNavsidebar .homepageLeft[data-v-5f6310bd]{line-height:60px;padding-left:6px}.confirm-order-style .rightTime[data-v-5f6310bd]{height:50vh;padding:8px;box-sizing:border-box;margin-left:130px;background:#fff;overflow-y:scroll}.confirm-order-style .wechat[data-v-5f6310bd]{width:18px;height:18px;margin-right:8px;display:inline-block;font-size:18px;vertical-align:middle}.confirm-order-style .wechat uni-image[data-v-5f6310bd]{width:100%;height:100%}",""]),e.exports=t},b0c7:function(e,t,a){"use strict";var r=a("1776"),i=a.n(r);i.a},e63c:function(e,t,a){"use strict";var r={uniNavBar:a("cefd").default,aNodeData:a("df27").default,aGoodLineBox:a("9ec2").default,aBottomSubmit:a("6761").default,uniPopup:a("6900").default,uniIcons:a("6bf4").default,aReceiveAddress:a("01ff").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm-order-style",class:e.mainStyle},[a("uni-nav-bar",{attrs:{fixed:!0,"left-icon":"back",title:"确认订单","status-bar":!0,shadow:!1},on:{clickLeft:function(t){arguments[0]=t=e.$handleEvent(t),e.clickLeft.apply(void 0,arguments)}}}),e.loading||0!==e.prodList.length?e._e():a("a-nodeData",{attrs:{stringVal:"获取数据失败"}}),e.prodList.length>0?a("div",[e.$Route.query.isIntegral?e._e():a("div",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChange.apply(void 0,arguments)}}},[a("div",{staticClass:"order-area"},[a("div",{staticClass:"order-area-icon"},[a("v-uni-image",{attrs:{src:"/static/assets/img/weizhi.png",alt:!0}})],1),e.currentArea&&"{}"!==JSON.stringify(e.currentArea)?a("div",{staticStyle:{flex:"1"}},[a("div",[a("span",[e._v(e._s(e.currentArea.Name)+e._s(e._f("setSex2")(e.currentArea.Sex)))]),a("span",{staticClass:"order-area-phone"},[e._v(e._s(e.currentArea.Mobile?e.currentArea.Mobile:e.currentArea.Tel))])]),a("div",{staticClass:"order-area-location"},[e._v(e._s(e.currentArea.Address)+" "+e._s(e.currentArea.House))])]):a("div",{staticStyle:{flex:"1",margin:"auto","font-size":"14px",color:"#909090"}},[e._v("选择"+e._s(2===e.radioModes?"收货":"取货")+"地址")])])]),e.$Route.query.isIntegral?a("adCell",{attrs:{text:"门店自取",showArrow:"false"}}):e._e(),e.DiscountList.length>0?a("adCell",{attrs:{text:e.UserDiscountName},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickUserDiscount.apply(void 0,arguments)}}},[a("v-uni-view",[e._v(e._s(e.UserDiscount))])],1):e._e(),1===e.radioModes?a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"姓名",showArrow:"false"}},[a("v-uni-input",{attrs:{type:"text",placeholder:"请输入收件名字"},model:{value:e.name_user,callback:function(t){e.name_user=t},expression:"name_user"}}),a("v-uni-text",{staticClass:"iconfont icon-tongxunlu",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getAddress.apply(void 0,arguments)}}})],1),a("adCell",{attrs:{text:"手机号码",showArrow:"false"}},[a("v-uni-input",{attrs:{type:"text",placeholder:"请输入手机号码"},model:{value:e.phone_user,callback:function(t){e.phone_user=t},expression:"phone_user"}})],1)],1):e._e(),a("div",{staticClass:"setADcell"},[a("adCell",{attrs:{text:"备注留言",showArrow:"false",showBottomLine:"false"}},[a("v-uni-input",{attrs:{type:"text",placeholder:"请输入留言"},model:{value:e.UserRemarks,callback:function(t){e.UserRemarks=t},expression:"UserRemarks"}})],1)],1),a("div",{staticClass:"good_card_box"},e._l(e.prodList,(function(t,r){return a("div",{key:r,staticStyle:{"margin-bottom":"10px"}},[a("a-good-lineBox",{attrs:{itemData:t,isOrder:!0,isIntegral:!!e.$Route.query.isIntegral}})],1)})),0),a("adCell",{attrs:{text:"商品总价格",showArrow:"false",showBottomLine:"false"}},[a("span",[e._v("¥"+e._s(e.ProdTotal))])]),2===e.radioModes?a("adCell",{attrs:{text:"运费",showArrow:"false",showBottomLine:"false"}},[a("span",[e._v(e._s("0"==e.freight?"免运费":"¥"+e.freight))])]):e._e(),a("div",{staticClass:"total-style"},[a("span",[e._v("小计："),a("span",{staticClass:"total-style__color"},[e.allData.ScoreTotal?a("span",[e._v(e._s(e._f("spliceNum")(e.allData.ScoreTotal))+"积分")]):e._e(),e.totalCurrent>0&&1===e.radioModes?a("span",[e._v("¥"+e._s(e._f("spliceNum")(e.ProdTotal)))]):a("span",[e._v(e._s(e.totalCurrent>0&&e.allData.ScoreTotal?"+":"")+"¥"+e._s(e._f("spliceNum")(e.totalCurrent)))])])])]),a("div",{staticClass:"radio-group-play"},[e.$Route.query.isIntegral&&e.allData.CardInfo?a("div",{staticStyle:{"padding-bottom":"4px"}},[e._v("当前卡积分："+e._s(e.allData.CardInfo.Score))]):e._e(),a("v-uni-view",{staticClass:"payStyle"},[e._v("支付方式")]),a("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioPayChange.apply(void 0,arguments)}}},[e.allData.SalePriceTotal&&e.$Route.query.isIntegral||!e.$Route.query.isIntegral?a("div",[e.allData.hasOwnProperty("CardInfo")?a("div",{staticClass:"radio-group-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.PayTypeClick("1")}}},[a("div",[a("img",{staticClass:"wechat",attrs:{slot:"right-icon",src:"/static/assets/img/moneyPay.png"},slot:"right-icon"}),a("span",{staticClass:"custom-title"},[e._v("卡支付（余额:"+e._s(e.CardInfo.Balance)+"）")])]),a("div",{staticStyle:{flex:"1","text-align":"right"}},[Number(e.CardInfo.Balance)>e.totalCurrent?a("v-uni-radio",{attrs:{slot:"right-icon",value:"1",checked:"1"==e.radioPayType},slot:"right-icon"}):a("span",{staticClass:"summaryNum",staticStyle:{color:"#777"}},[e._v("余额不足")])],1)]):e._e(),e.$Route.query.isIntegral&&!e.allData.CardInfo?e._e():a("div",{staticClass:"radio-group-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.PayTypeClick("2")}}},[a("div",[a("img",{staticClass:"wechat",attrs:{src:"/static/assets/img/weixinPay.png"}}),a("span",{staticClass:"custom-title"},[e._v("微信支付")])]),a("v-uni-radio",{staticStyle:{flex:"1","text-align":"right"},attrs:{slot:"right-icon",value:"2",checked:"2"==e.radioPayType},slot:"right-icon"})],1)]):e._e()])],1),a("a-bottomSubmit",{attrs:{isOrder:!0,allMoney:e.totalCurrent,isType:e.radioModes,ziquSumMoney:e.ProdTotal,scoreTatal:e.totalCurrentScore,cardInfo:e.allData.CardInfo,isIntegral:e.$Route.query.isIntegral},on:{submitMoney:function(t){arguments[0]=t=e.$handleEvent(t),e.submitMoney.apply(void 0,arguments)}}})],1):e._e(),a("div",{staticClass:"changeAreaStyle"},[a("uni-popup",{ref:"showAreaList",attrs:{type:"bottom"},model:{value:e.showAreaList,callback:function(t){e.showAreaList=t},expression:"showAreaList"}},[a("div",{staticClass:"confirm-order-popup"},[a("div",{staticClass:"top"},[a("span",{staticClass:"cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.showAreaList.close()}}},[e._v("取消")]),a("span",[e._v("选择地址")])]),a("v-uni-radio-group",{ref:"checkboxAreaRef",staticClass:"bottom-area",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeGroup.apply(void 0,arguments)}}},e._l(e.areaList,(function(t,r){return a("div",{key:r,staticClass:"bottom-area__box",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.changeArea(t,r)}}},[a("v-uni-radio",{staticClass:"checkbox-my",attrs:{value:t.SID,checked:e.showAreaList==t.SID}}),a("div",{staticClass:"bottom-area__info"},[a("div",[e._v(e._s(t.Address)+" "+e._s(t.House))]),a("div",{staticClass:"bottom-area__phone"},[e._v(e._s(t.Name)),t.Sex?a("span",[e._v(e._s(e._f("setSex2")(t.Sex)))]):e._e(),e._v(""),a("span",[e._v(e._s(t.Mobile?t.Mobile:t.Tel))])])]),2===e.radioModes?a("span",{staticClass:"icon iconfont icon-bianji bottom-area__icon",on:{click:function(a){a.stopPropagation(),arguments[0]=a=e.$handleEvent(a),e.clickEdit(t)}}}):e._e()],1)})),0),2===e.radioModes?a("div",{staticClass:"bottom-area__add",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.areaSet.apply(void 0,arguments)}}},[a("uni-icons",{staticClass:"colorStyle",staticStyle:{"vertical-align":"middle","font-size":"18px","margin-right":"6px"},attrs:{type:"plus"}}),a("span",{staticStyle:{"vertical-align":"middle"}},[e._v("新增收货地址")])],1):e._e()],1)])],1),a("uni-popup",{ref:"addEditArea",staticClass:"confirm-area-popup",attrs:{position:"bottom"},model:{value:e.addEditArea,callback:function(t){e.addEditArea=t},expression:"addEditArea"}},[e.addEditArea?a("a-receive-address",{attrs:{radioModes:e.radioModes,areaInfo:e.areaInfo,currentDeliveryType:e.currentDeliveryType},on:{clickGo:function(t){arguments[0]=t=e.$handleEvent(t),e.clickGo.apply(void 0,arguments)},saveArea:function(t){arguments[0]=t=e.$handleEvent(t),e.saveAreaSet.apply(void 0,arguments)}}}):e._e()],1),a("uni-popup",{ref:"discountProgram",attrs:{type:"bottom"}},[a("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.setDiscountClick.apply(void 0,arguments)}}},[a("ad-cell",{attrs:{text:"暂不使用",showArrow:"false"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.DiscountClick("undefined")}}},[a("v-uni-radio",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-left":"20px"},attrs:{value:"undefined",checked:"undefined"===e.radioDiscount}})],1),e._l(e.DiscountList,(function(t,r){return a("div",{key:r},[a("adCell",{attrs:{text:t.PrefName,showArrow:"false",showBottomLine:"false"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.DiscountClick(t)}}},[a("span",{staticStyle:{"margin-right":"20px"}},[e._v("-¥"+e._s(t.DiscPrice||0))]),a("v-uni-radio",{attrs:{value:t.PrefNo,checked:t.PrefNo===e.radioDiscount}})],1)],1)}))],2)],1)],1)},o=[];a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return r}))},fe9e:function(e,t,a){"use strict";a.r(t);var r=a("e63c"),i=a("2804");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("03ee");var n,s=a("f0c5"),c=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"5f6310bd",null,!1,r["a"],n);t["default"]=c.exports},ff86:function(e,t,a){var r=a("91a7");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=a("4f06").default;i("d93a8524",r,!0,{sourceMap:!1,shadowMode:!1})}}]);